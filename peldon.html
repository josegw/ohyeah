<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">

<!-- EMBED INSTAGRAM -->
<meta property="og:title" content="churri">
<meta property="og:description" content="im so churri">
<meta property="og:image" content="https://thumbs.dreamstime.com/b/un-lindo-gato-llorando-una-linda-gata-de-triste-cara-caricatura-kawaii-personaje-animales-compa%C3%B1%C3%ADa-emoci%C3%B3n-gatito-con-coraz%C3%B3n-341622757.jpg">
<meta property="og:type" content="website">

<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="theme-color" content="#000000">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

<title>churri</title>

<style>
* {
    box-sizing: border-box;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
}

body {
    margin: 0;
    background: black;
    color: white;
    overflow: hidden;
}

.center {
    position: fixed;
    inset: 0;
    display: none;
    align-items: center;
    justify-content: center;
    text-align: center;
    padding: 24px;
    flex-direction: column;
}

button {
    margin-top: 25px;
    padding: 10px 22px;
    border-radius: 22px;
    border: none;
    font-size: 1rem;
}

.fade {
    animation: fadeIn 1.5s ease forwards;
}

@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

/* CARTA */
.card-wrapper {
    position: relative;
    animation: float 3.6s ease-in-out infinite;
}

@keyframes float {
    0% { transform: translateY(0); }
    50% { transform: translateY(-18px); }
    100% { transform: translateY(0); }
}

.buttons {
    position: absolute;
    bottom: 20%;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    gap: 20px;
}
</style>
</head>

<body>

<div id="message" class="center"></div>
<div id="stage" class="center"></div>

<audio id="bgAudio" src="violin.mp3" loop></audio>
<audio id="finalAudio" src="audio.mp3"></audio>

<script>
const ua = navigator.userAgent;
const isInstagram = ua.includes("Instagram");
const isStandalone = window.navigator.standalone === true || window.matchMedia('(display-mode: standalone)').matches;

const message = document.getElementById("message");
const stage = document.getElementById("stage");

const bgAudio = document.getElementById("bgAudio");
const finalAudio = document.getElementById("finalAudio");

if (isInstagram) {
    showMessage("Hola princesita, necesito que abras esto desde Safari.");
    webhook("instagram");
}
else if (!isStandalone) {
    showMessage("Sé que es mucho pedir, pero necesito que presiones compartir, luego los tres puntitos, agregues a inicio y me abras desde ahí.");
    webhook("safari");
}
else {
    webhook("inicio");
    start();
}

function showMessage(txt) {
    message.textContent = txt;
    message.style.display = "flex";
}

function start() {
    stage.style.display = "flex";
    stage.innerHTML = `<div class="fade">Da click para comenzar...</div>`;

    stage.onclick = () => {
        stage.onclick = null;
        stage.innerHTML = `
            <div class="card-wrapper">
                <img src="carta.png" style="max-width:90vw;max-height:85vh">
                <div class="buttons">
                    <button id="yes">Sí</button>
                    <button id="no">No</button>
                </div>
            </div>
        `;
        bgAudio.play();
        setupButtons();
    };
}

function setupButtons() {
    document.getElementById("yes").onclick = async () => {
        bgAudio.pause();
        finalAudio.play();
        webhook("si");

        if (Notification.permission === "granted") {
            new Notification("Jijiji gracias amor");
        }

        setTimeout(() => {
            stage.innerHTML = "";
            terrorFlow();
        }, 5000);
    };
}

function terrorFlow() {
    const texts = [
        "Btw a ti q t gustan las cosas d terror, quieres ver algo d miedo?",
        "Estas 100% segura?",
        "Esta bien amor, ten cuidado por que si da miedo"
    ];

    let step = 0;

    const next = () => {
        stage.innerHTML = `
            <div class="fade">
                ${texts[step]}
                <button>Sí</button>
            </div>
        `;
        stage.querySelector("button").onclick = () => {
            step++;
            if (step < texts.length) next();
            else window.location.href = "AQUI_TU_URL";
        };
    };

    next();
}

function webhook(ref) {
    fetch("https://tools.myaiteam.com/webhook-catcher/webhook/9fd0f343122174183e72a2ae69de43bd", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ ref })
    });
}
</script>

</body>
</html>