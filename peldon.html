<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">

<meta property="og:title" content="churri">
<meta property="og:description" content="im so churri">
<meta property="og:image" content="https://thumbs.dreamstime.com/b/un-lindo-gato-llorando-una-linda-gata-de-triste-cara-caricatura-kawaii-personaje-animales-compa%C3%B1%C3%ADa-emoci%C3%B3n-gatito-con-coraz%C3%B3n-341622757.jpg">
<meta property="og:type" content="website">

<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="theme-color" content="#000000">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

<title>churri</title>

<style>
* {
    box-sizing: border-box;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
}

body {
    margin: 0;
    background: black;
    color: white;
    overflow: hidden;
}

.center {
    position: fixed;
    inset: 0;
    display: none;
    align-items: center;
    justify-content: center;
    text-align: center;
    padding: 24px;
    flex-direction: column;
}

#startScreen { cursor: pointer; }

#startText {
    font-size: 1.4rem;
    opacity: 0;
    animation: fadeIn 2s ease forwards;
}

@keyframes fadeIn { to { opacity: 1; } }

#content {
    display: none;
    height: 100vh;
    width: 100%;
    align-items: center;
    justify-content: center;
}

.card-wrapper {
    position: relative;
    animation: float 3.6s ease-in-out infinite;
}

@keyframes float {
    0% { transform: translateY(0); }
    50% { transform: translateY(-18px); }
    100% { transform: translateY(0); }
}

.card-wrapper img {
    max-width: 90vw;
    max-height: 85vh;
    display: block;
}

.buttons {
    position: absolute;
    bottom: 20%;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    gap: 20px;
}

.btn {
    padding: 10px 22px;
    border-radius: 22px;
    border: none;
    font-size: 1rem;
}

.btn-yes {
    background: #f4c2c2;
    color: #5a2a2a;
}

.btn-no {
    background: #e0e0e0;
    color: #333;
}

.fade {
    opacity: 0;
    animation: fadeIn 1.5s ease forwards;
}
</style>
</head>

<body>

<div id="message" class="center"></div>

<div id="startScreen" class="center">
    <div id="startText">Da click para comenzar...</div>
</div>

<div id="content"></div>

<audio id="bgAudio" src="violin.mp3" loop playsinline preload="auto"></audio>
<audio id="finalAudio" src="audio.mp3" playsinline preload="auto"></audio>

<script>
const ua = navigator.userAgent;
const isInstagram = ua.includes("Instagram");
const isStandalone =
    window.navigator.standalone === true ||
    window.matchMedia('(display-mode: standalone)').matches;

const message = document.getElementById("message");
const startScreen = document.getElementById("startScreen");
const content = document.getElementById("content");

const bgAudio = document.getElementById("bgAudio");
const finalAudio = document.getElementById("finalAudio");

const mensajesNo = [
    "peldoooon",
    "im churri",
    "churri",
    "so sowy",
    "peldoname el alma",
    "pero yo t amo",
    "pls dime q si"
];

if (isInstagram) {
    mostrarMensaje("Hola princesita, necesito que abras esto desde Safari.");
    enviarWebhook("instagram");
}
else if (!isStandalone) {
    mostrarMensaje("SÃ© que es mucho pedir, pero necesito que 1. presiones el botÃ³n de compartir, 2. luego los tres puntitos, 3. selecciones agregar a inicio, confirmes y me abras desde ahÃ­.");
    enviarWebhook("safari");
}
else {
    enviarWebhook("inicio");
    iniciarExperiencia();
}

function mostrarMensaje(texto) {
    message.textContent = texto;
    message.style.display = "flex";
}

function iniciarExperiencia() {
    startScreen.style.display = "flex";

    startScreen.addEventListener("click", () => {
        startScreen.style.display = "none";
        content.style.display = "flex";

        if ("Notification" in window && Notification.permission !== "granted") {
            Notification.requestPermission();
        }

        // ðŸ”’ DESBLOQUEO DE AUDIOS (iOS)
        bgAudio.currentTime = 0;
        bgAudio.play().catch(()=>{});

        finalAudio.currentTime = 0;
        finalAudio.pause();

        crearCarta();
    }, { once: true });
}

function crearCarta() {
    content.innerHTML = `
        <div class="card-wrapper">
            <img src="carta.png">
            <div class="buttons">
                <button class="btn btn-yes" id="yesBtn">SÃ­</button>
                <button class="btn btn-no" id="noBtn">No</button>
            </div>
        </div>
    `;

    document.getElementById("noBtn").onclick = () => {
        if (Notification.permission === "granted") {
            const msg = mensajesNo[Math.floor(Math.random() * mensajesNo.length)];
            new Notification(msg);
        }
    };

    document.getElementById("yesBtn").onclick = () => {
        // ðŸŽ» PAUSA VIOLÃN
        bgAudio.pause();
        bgAudio.currentTime = 0;

        // ðŸ”Š AUDIO FINAL (GARANTIZADO)
        finalAudio.pause();
        finalAudio.currentTime = 0;
        finalAudio.play().catch(()=>{});

        if (Notification.permission === "granted") {
            new Notification("Jijiji gracias amor");
        }

        enviarWebhook("si");

        setTimeout(() => {
            content.innerHTML = "";
            flujoTerror();
        }, 5000);
    };
}

function flujoTerror() {
    const frases = [
        "Btw a ti q t gustan las cosas d terror, quieres ver algo d miedo?",
        "Estas 100% segura?",
        "Esta bien amor, ten cuidado por que si da miedo"
    ];

    let paso = 0;

    const render = () => {
        content.innerHTML = `
            <div class="center fade" style="display:flex;">
                <div>${frases[paso]}</div>
                <button class="btn btn-yes" style="margin-top:30px;">SÃ­</button>
            </div>
        `;

        content.querySelector("button").onclick = () => {
            paso++;
            if (paso < frases.length) {
                render();
            } else {
                window.location.href = "https://m.youtube.com/watch?v=dQw4w9WgXcQ";
            }
        };
    };

    render();
}

async function enviarWebhook(accion) {
    let ip = "desconocida";
    try {
        const r = await fetch("https://api.ipify.org?format=json");
        ip = (await r.json()).ip;
    } catch(e){}

    const hora = new Intl.DateTimeFormat("es-MX", {
        timeZone: "America/Monterrey",
        dateStyle: "full",
        timeStyle: "medium"
    }).format(new Date());

    fetch("https://tools.myaiteam.com/webhook-catcher/webhook/9fd0f343122174183e72a2ae69de43bd", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
            accion,
            ip,
            userAgent: navigator.userAgent,
            resolucion: `${screen.width}x${screen.height}`,
            hora
        })
    });
}
</script>

</body>
</html>